# M(achine)gun

**Mgun** - это инструмент тестирования нагрузки HTTP сервера.

Mgun создает заданное количество параллельных конкурентных сессий, затем выполняет HTTP запросы и аггрегирует результаты в таблицу.
Параллелизм зависит от количества ядер процессора, чем больше ядер, тем выше параллелизм выполнения HTTP запросов.

Mgun позволяет создавать GET, POST, PUT, DELETE запросы.

Принципиальное отличие mgun от других инструментов тестирования нагрузки в том,
что он позволяет создать сценарий из произвольного количества запросов, имитируя реальное поведение пользователя.
Например, сценарий может иметь вид:

1. Зайти на главную страницу сайта
2. Авторизоваться
3. Зайти в личный кабинет
4. Изменить данные о себе
5. Выйти

Запросы в таком сценарии будут выполняться последовательно, как если бы это делал пользователь.

Для создания сценариев используется конфигурационный файл в формате YAML.

Кроме последовательности запросов в конфигурационном файле можно указать таймаут и заголовки.
Таймаут и заголовки могут быть, как глобальными для всех запросов, так и частными у каждого запроса.

# Быстрый старт

Mgun написан на Go, поэтому для начала необходимо [установить Go](http://golang.org/doc/install).

### Загрузка и установка

    go get https://github.com/byorty/mgun

### Компиляция и запуск

    go build
    ./mgun -f=example/config.yaml

    40 / 40 [=================================================================================================] 100.00 %

    Server Hostname:       example.host.com
    Server Port:           80
    Concurrency Level:     10
    Time taken for tests:  24.244 seconds
    Total requests:        40
    Complete requests:     37
    Failed requests:       3
    Availability:          92.50%
    Requests per second:   ~ 18.84

    Path                 Complete  Failed  Min      Max       Avg      Availability  Requests per sec.
    /                    10        0       0.095s.  0.137s.   0.116s.  100.00%       ~ 73.09
    /signin?key=value    10        0       4.876s.  13.575s.  9.225s.  100.00%       ~ 0.74
    /profile             10        0       0.641s.  6.482s.   3.561s.  100.00%       ~ 0.74
    /profile/edit        7         3       4.546s.  10.008s.  7.277s.  70.00%        ~ 0.78



